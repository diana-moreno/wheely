(this["webpackJsonpwheely-app"]=this["webpackJsonpwheely-app"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports={errors:a(25),validators:a(26),validate:a(58)}},,,,,,,,,,,,,,function(e,t,a){},,,function(e,t,a){e.exports={ConflictError:a(48),ContentError:a(52),CredentialsError:a(53),NotFoundError:a(54)}},function(e,t,a){e.exports={isTypeOf:a(55),isInstanceOf:a(56),isEmail:a(57)}},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){e.exports=a(72)},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){var n=a(16),r=a(17),c=a(14),s=a(13),o=a(18),l=a(19);e.exports=function(e){"use strict";function t(e){var a;return n(this,t),a=r(this,c(t).call(this,e)),Error.captureStackTrace(s(a),t),a.name=t.name,a}return o(t,e),t}(l(Error))},,,,function(e,t,a){var n=a(16),r=a(17),c=a(14),s=a(13),o=a(18),l=a(19);e.exports=function(e){"use strict";function t(e){var a;return n(this,t),a=r(this,c(t).call(this,e)),Error.captureStackTrace(s(a),t),a.name=t.name,a}return o(t,e),t}(l(Error))},function(e,t,a){var n=a(16),r=a(17),c=a(14),s=a(13),o=a(18),l=a(19);e.exports=function(e){"use strict";function t(e){var a;return n(this,t),a=r(this,c(t).call(this,e)),Error.captureStackTrace(s(a),t),a.name=t.name,a}return o(t,e),t}(l(Error))},function(e,t,a){var n=a(16),r=a(17),c=a(14),s=a(13),o=a(18),l=a(19);e.exports=function(e){"use strict";function t(e){var a;return n(this,t),a=r(this,c(t).call(this,e)),Error.captureStackTrace(s(a),t),a.name=t.name,a}return o(t,e),t}(l(Error))},function(e,t){e.exports=function(e,t){return typeof e===t}},function(e,t){e.exports=function(e,t){return e instanceof t}},function(e,t){var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;e.exports=function(e){return a.test(e)}},function(e,t,a){var n=a(25).ContentError,r=a(26),c=r.isTypeOf,s=r.isInstanceOf,o=r.isEmail,l={typeOf:function(e,t){if(!c(t,e))throw new TypeError("".concat(t," is not a ").concat(e))},string:function(e){this.typeOf("string",e)},function:function(e){this.typeOf("function",e)},number:function(e){this.typeOf("number",e)},boolean:function(e){this.typeOf("boolean",e)},instanceOf:function(e,t){if(!s(t,e))throw TypeError("".concat(t," is not a ").concat(e.name))},array:function(e){this.instanceOf(Array,e)},date:function(e){this.instanceOf(Date,e)},email:function(e){if(!o(String(e).toLowerCase()))throw new n("".concat(e," is not an e-mail"))},matches:function(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),c=2;c<a;c++)r[c-2]=arguments[c];if(!r.includes(t))throw new n("".concat(t," does not match any of the valid ").concat(e," values: ").concat(r))}};l.string.notVoid=function(e,t){if(!t.trim().length)throw new n("".concat(e," is empty or blank"))},e.exports=l},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),o=a(1),l=a.n(o),i=a(3),u=a(2),m=a(11),d=Object(n.createContext)({}),p=(a(44),a(45),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"Check your reservations"),r.a.createElement("li",null,"Review your students progression"),r.a.createElement("li",null,"Write a feedback to your students after the class"),r.a.createElement("li",null,"Modify your email where to receive notifications"),r.a.createElement("li",null,"Check your weekly work schedule"))}),f=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"Booking choosing teacher, day and time"),r.a.createElement("li",null,"Cancel your reservations"),r.a.createElement("li",null,"Check your reservations"),r.a.createElement("li",null,"Review your progression with the assessments of your teachers"),r.a.createElement("li",null,"Modify your email where to receive notifications"),r.a.createElement("li",null,"Check your available credits to manage purchases"))},b=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"Register new users and delete wrong users"),r.a.createElement("li",null,"Modify personal data"),r.a.createElement("li",null,"Add credits to your students"),r.a.createElement("li",null,"Manage the instructor's schedule"),r.a.createElement("li",null,"Check all reservations"),r.a.createElement("li",null,"View students of instructors and their progression"))},E=function(e){var t=e.name,a=Object(n.useContext)(d).roleOwner;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("h3",null,"Home")),r.a.createElement("section",{className:"home"},r.a.createElement("p",{className:"home__greeting"},"Welcome, ",t,"!"),r.a.createElement("div",{className:"home__description"},r.a.createElement("p",null,"This is your personal area in Wheely. From here you can:"),r.a.createElement("ul",null,"student"===a&&r.a.createElement(f,null),"instructor"===a&&r.a.createElement(p,null),"admin"===a&&r.a.createElement(b,null)))))},h=(a(46),a(47),function(e){var t=e.error,a=e.message;return r.a.createElement("section",{className:"feedback"},r.a.createElement("p",{className:"".concat("feedback__message feedback__message","--").concat(t?"error":"success")},a))}),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.method,n=void 0===a?"GET":a,r=t.headers,c=t.body;return new Promise((function(t,a){try{var s=new XMLHttpRequest;if(s.open(n,e),s.onreadystatechange=function(){if(4===this.readyState)if(0===this.status)a(new Error("fail to call ".concat(e)));else{var n={status:this.status,body:this.responseText};t(n)}},r)for(var o in r)s.setRequestHeader(o,r[o]);c?s.send(c):s.send()}catch(l){a(l)}}))},g=a(8),O=g.validate,w=g.errors.CredentialsError,k=a(8),y=k.validate,j=k.errors.ConflictError,N=a(8),x=N.validate,_=N.errors,S=_.CredentialsError,C=_.NotFoundError,J=a(8),T=J.validate,B=J.errors,F=B.NotFoundError,V=B.CredentialsError,D=a(8),Y=D.validate,M=D.errors,I=M.NotFoundError,H=M.CredentialsError,A=a(8),P=A.validate,L=A.errors,R=L.CredentialsError,z=L.NotFoundError,W=L.ConflictError,G=a(8),U=G.validate,q=G.errors,K=q.CredentialsError,Z=q.NotFoundError,$=q.ConflictError,X=a(8),Q=X.validate,ee=X.errors,te=ee.CredentialsError,ae=ee.NotFoundError,ne=ee.ConflictError,re=a(8),ce=re.validate,se=re.errors,oe=se.NotFoundError,le=se.CredentialsError,ie=a(8),ue=ie.validate,me=ie.errors,de=me.CredentialsError,pe=me.NotFoundError,fe=a(8),be=fe.validate,Ee=fe.errors,he=Ee.CredentialsError,ve=Ee.NotFoundError,ge=Ee.ConflictError,Oe=a(8),we=Oe.validate,ke=Oe.errors,ye=ke.CredentialsError,je=ke.NotFoundError,Ne=ke.ConflictError,xe=function(e,t,a,n,r,c,s){return y.string(t),y.string.notVoid("name",t),y.string(a),y.string.notVoid("surname",a),y.string(n),y.string.notVoid("e-mail",n),y.email(n),y.string(c),y.string.notVoid("password",c),y.string(s),y.string.notVoid("role",s),Object(i.a)(l.a.mark((function o(){var i;return l.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/users"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({name:t,surname:a,email:n,dni:r,password:c,role:s})});case 2:if(201!==(i=o.sent).status){o.next=5;break}return o.abrupt("return","Registration succesfully");case 5:if(409!==i.status){o.next=7;break}throw new j(JSON.parse(i.body).message);case 7:throw new Error(JSON.parse(i.body).message);case 8:case"end":return o.stop()}}),o)})))()},_e=function(e,t){return x.string(e),x.string.notVoid("token",e),x.string(t),x.string.notVoid("id",t),Object(i.a)(l.a.mark((function a(){var n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/users/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 2:if(200!==(n=a.sent).status){a.next=7;break}return(r=JSON.parse(n.body)).lastAccess=new Date(r.lastAccess),a.abrupt("return",r);case 7:if(401!==n.status){a.next=9;break}throw new S(JSON.parse(n.body).message);case 9:if(404!==n.status){a.next=11;break}throw new C(JSON.parse(n.body).message);case 11:throw new Error(JSON.parse(n.body).message);case 12:case"end":return a.stop()}}),a)})))()},Se=function(e,t){return T.string(e),T.string.notVoid("token",e),t&&(T.string(t),T.string.notVoid("id",t)),Object(i.a)(l.a.mark((function a(){var n,r,c,s,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat("https://peaceful-reef-49639.herokuapp.com","/users"),r="".concat("https://peaceful-reef-49639.herokuapp.com","/users/").concat(t,"/users"),c=t?r:n,a.next=5,v(c,{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 5:if(200!==(s=a.sent).status){a.next=9;break}return o=JSON.parse(s.body),a.abrupt("return",o);case 9:if(401!==s.status){a.next=11;break}throw new V(JSON.parse(s.body).message);case 11:if(404!==s.status){a.next=13;break}throw new F(JSON.parse(s.body).message);case 13:throw new Error(JSON.parse(s.body).message);case 14:case"end":return a.stop()}}),a)})))()},Ce=function(e,t){return Y.string(e),Y.string.notVoid("token",e),Y.string(t),Y.string.notVoid("id",t),Object(i.a)(l.a.mark((function a(){var n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/practices/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});case 2:if(200!==(n=a.sent).status){a.next=6;break}return r=JSON.parse(n.body),a.abrupt("return",r);case 6:if(401!==n.status){a.next=8;break}throw new H(JSON.parse(n.body).message);case 8:if(404!==n.status){a.next=10;break}throw new I(JSON.parse(n.body).message);case 10:throw new Error(JSON.parse(n.body).message);case 11:case"end":return a.stop()}}),a)})))()},Je=function(e,t,a,n){return P.string(e),P.string.notVoid("token",e),P.string(t),P.string.notVoid("instructorId",t),P.number(a),P.string(n),P.string.notVoid("hour",n),Object(i.a)(l.a.mark((function r(){var c,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/schedule/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({indexDay:a,hour:n})});case 2:if(200!==(c=r.sent).status){r.next=6;break}return s=JSON.parse(c.body),r.abrupt("return",s);case 6:if(401!==c.status){r.next=8;break}throw new R(JSON.parse(c.body).message);case 8:if(404!==c.status){r.next=10;break}throw new z(JSON.parse(c.body).message);case 10:if(409!==c.status){r.next=12;break}throw new W(JSON.parse(c.body).message);case 12:throw new Error(JSON.parse(c.body).message);case 13:case"end":return r.stop()}}),r)})))()},Te=function(e,t){return U.string(e),U.string.notVoid("token",e),U.string(t),U.string.notVoid("user id",t),Object(i.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/users/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});case 2:if(200!==(n=a.sent).status){a.next=5;break}return a.abrupt("return");case 5:if(401!==n.status){a.next=7;break}throw new K(JSON.parse(n.body).message);case 7:if(404!==n.status){a.next=9;break}throw new Z(JSON.parse(n.body).message);case 9:if(409!==n.status){a.next=11;break}throw new $(JSON.parse(n.body).message);case 11:throw new Error(JSON.parse(n.body).message);case 12:case"end":return a.stop()}}),a)})))()},Be=function(e,t,a,n,r,c,s,o){return Q.string(e),Q.string.notVoid("token",e),Q.string(t),Q.string.notVoid("user id",t),a&&(Q.string(a),Q.string.notVoid("name",a)),n&&(Q.string(n),Q.string.notVoid("surname",n)),r&&(Q.string(r),Q.string.notVoid("email",r)),c&&(Q.string(c),Q.string.notVoid("dni",c)),s&&Q.number(s),o&&(Q.string(o),Q.string.notVoid("password",o)),Object(i.a)(l.a.mark((function i(){var u;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/users/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({name:a,surname:n,email:r,dni:c,credits:s,password:o})});case 2:if(200!==(u=l.sent).status){l.next=5;break}return l.abrupt("return");case 5:if(401!==u.status){l.next=7;break}throw new te(JSON.parse(u.body).message);case 7:if(404!==u.status){l.next=9;break}throw new ae(JSON.parse(u.body).message);case 9:if(409!==u.status){l.next=11;break}throw new ne(JSON.parse(u.body).message);case 11:throw new Error(JSON.parse(u.body).message);case 12:case"end":return l.stop()}}),i)})))()},Fe=function(e,t,a){return ce.string(e),ce.string.notVoid("token",e),ce.string(t),ce.string.notVoid("instructorId",t),Object(i.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/practices"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({instructorId:t,dateTime:a})});case 2:if(200!==(r=n.sent).status){n.next=5;break}return n.abrupt("return",JSON.parse(r.body).practice);case 5:if(401!==r.status){n.next=7;break}throw new le(JSON.parse(r.body).message);case 7:if(404!==r.status){n.next=9;break}throw new oe(JSON.parse(r.body).message);case 9:throw new Error(JSON.parse(r.body).message);case 10:case"end":return n.stop()}}),n)})))()},Ve=function(e,t){return ue.string(e),ue.string.notVoid("token",e),Object(i.a)(l.a.mark((function a(){var n,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/practices/detail/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 2:if(200!==(n=a.sent).status){a.next=6;break}return r=JSON.parse(n.body),a.abrupt("return",r);case 6:if(401!==n.status){a.next=8;break}throw new de(JSON.parse(n.body).message);case 8:if(404!==n.status){a.next=10;break}throw new pe(JSON.parse(n.body).message);case 10:throw new Error(JSON.parse(n.body).message);case 11:case"end":return a.stop()}}),a)})))()},De=function(e,t,a){return be.string(e),be.string.notVoid("token",e),be.string(t),be.string.notVoid("user id",t),be.string(a),be.string.notVoid("practice id",a),Object(i.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/practices/").concat(a),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({instructorId:t})});case 2:if(201!==(r=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:if(401!==r.status){n.next=7;break}throw new he(JSON.parse(r.body).message);case 7:if(404!==r.status){n.next=9;break}throw new ve(JSON.parse(r.body).message);case 9:if(409!==r.status){n.next=11;break}throw new ge(JSON.parse(r.body).message);case 11:throw new Error(JSON.parse(r.body).message);case 12:case"end":return n.stop()}}),n)})))()},Ye=function(e,t,a,n,r){return we.string(e),we.string.notVoid("token",e),we.string(t),we.string.notVoid("practice id",t),we.string(a),we.string.notVoid("student id",a),we.string(n),we.string.notVoid("comment",n),we.string(r),we.string.notVoid("valoration",r),Object(i.a)(l.a.mark((function c(){var s;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/practices/feedback/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({studentId:a,comment:n,valoration:r})});case 2:if(201!==(s=c.sent).status){c.next=5;break}return c.abrupt("return");case 5:if(401!==s.status){c.next=7;break}throw new ye(JSON.parse(s.body).message);case 7:if(404!==s.status){c.next=9;break}throw new je(JSON.parse(s.body).message);case 9:if(409!==s.status){c.next=11;break}throw new Ne(JSON.parse(s.body).message);case 11:throw new Error(JSON.parse(s.body).message);case 12:case"end":return c.stop()}}),c)})))()},Me=function(e,t){return O.string(e),O.string.notVoid("email",e),O.string(t),O.string.notVoid("password",t),Object(i.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v("".concat("https://peaceful-reef-49639.herokuapp.com","/users/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});case 2:if(200!==(n=a.sent).status){a.next=5;break}return a.abrupt("return",JSON.parse(n.body).token);case 5:if(401!==n.status){a.next=7;break}throw new w(JSON.parse(n.body).message);case 7:throw new Error(JSON.parse(n.body).message);case 8:case"end":return a.stop()}}),a)})))()},Ie=_e,He=Object(m.e)((function(e){var t=e.history,a=Object(n.useState)(null),c=Object(u.a)(a,2),s=c[0],o=c[1],m=Object(n.useContext)(d),p=m.setRoleOwner,f=m.setNameSurname,b=m.setMyId,E=function(){var e=Object(i.a)(l.a.mark((function e(a,n){var r,c,s,i,m,d,E,h,v,g,O;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Me(a,n);case 3:return r=e.sent,sessionStorage.token=r,c=r.split("."),s=Object(u.a)(c,2),i=s[1],m=atob(i),d=JSON.parse(m),E=d.sub,h=E,e.next=11,Ie(r,h);case 11:v=e.sent,g=v.user.name.concat(" ").concat(v.user.surname),b(v.user.id),p(v.user.role),f(g),t.push("/home"),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),O=e.t0.message,o({error:!0,message:O});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"login"},r.a.createElement("header",{className:"login__container"},r.a.createElement("h1",{className:"login__title"},"Wheely")),r.a.createElement("main",{className:"login__container"},r.a.createElement("p",{className:"login__subtitle"},"Instructors and students area"),r.a.createElement("form",{className:"login__form",onSubmit:function(e){e.preventDefault();var t=e.target,a=t.email.value,n=t.password.value;E(a,n)}},r.a.createElement("input",{type:"text",name:"email",placeholder:"email",className:"login__form-item"}),r.a.createElement("input",{type:"text",name:"password",placeholder:"password",className:"login__form-item"}),r.a.createElement("button",{className:"login__button"},"Enter")),r.a.createElement(h,s)))})),Ae=a(35),Pe=(a(28),a(4)),Le=a.n(Pe),Re=Object(m.e)((function(e){var t=e.history,a=e.practice,c=e.role,s=Object(n.useContext)(d).roleOwner,o=a.instructorId,l=o.name,i=o.surname,m=a.studentId,p=m.name,f=m.surname,b=a._id,E=a.status,h=a.date,v=Le()(h).format("DD-MM-YYYY HH:mm").split(" "),g=Object(u.a)(v,2),O=g[0],w=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"reservation reservation--".concat(E),onClick:function(){"student"===s&&"pending"===E?t.push("/reservation-detail/".concat(b)):"instructor"===s&&"feedback"===E&&t.push("/valoration/".concat(b))}},r.a.createElement("div",{className:"reservation__icon"},"pending"===E&&r.a.createElement("i",{className:"material-icons"},"hourglass_empty"),"feedback"===E&&"instructor"===s&&r.a.createElement("i",{className:"material-icons"},"create")),r.a.createElement("div",{className:"reservation__detail"},r.a.createElement("p",null,r.a.createElement("b",null,"Date: "),O),r.a.createElement("p",null,r.a.createElement("b",null,"Time: "),w),"student"===c?r.a.createElement("p",null,r.a.createElement("b",null,"Instructor: "),l," ",i):r.a.createElement("p",null,r.a.createElement("b",null,"Student: "),p," ",f),r.a.createElement("p",null,r.a.createElement("b",null,"Status: "),E))))}));function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(a),!0).forEach((function(t){Object(Ae.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ge=Ce,Ue=_e,qe=function(e){var t=e.id,a=e.onBack,c=Object(n.useState)(void 0),s=Object(u.a)(c,2),o=s[0],m=s[1],d=Object(n.useState)(),p=Object(u.a)(d,2),f=p[0],b=p[1],E=Object(n.useState)(null),v=Object(u.a)(E,2),g=v[0],O=v[1],w=Object(n.useState)("all"),k=Object(u.a)(w,2),y=k[0],j=k[1],N=sessionStorage.token;Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var a,n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ue(N,t);case 3:return a=e.sent,n=a.user.role,b(n),e.next=8,Ge(N,t);case 8:r=e.sent,c=r.practices,m(0===c.length?void 0:c.map(x)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),s=e.t0.message,O({error:!0,message:s});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[N,t]);var x=function(e){return Le()(e.date).isAfter(Le()())?We({},e,{status:"pending"}):Le()(e.date).isBefore(Le()())&&!e.feedback?We({},e,{status:"feedback"}):Le()(e.date).isBefore(Le()())&&e.feedback?We({},e,{status:"finished"}):We({},e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:a,className:"material-icons"},"undo"),r.a.createElement("h3",null,"Reservations"))," ",r.a.createElement("section",{className:"reservations"},r.a.createElement("form",{action:""},r.a.createElement("select",{name:"role",className:"reservations__search",onChange:function(e){var t=e.target;j(t.value)}},r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"pending"},"Pending"),r.a.createElement("option",{value:"feedback"},"Missing feedback"),r.a.createElement("option",{value:"finished"},"Finished"))),r.a.createElement("div",{className:"reservations__container"},r.a.createElement("ul",null,o?o.filter((function(e){return"all"===y?e:e.status===y})).sort((function(e,t){return Le()(t.date).diff(Le()(e.date))})).map((function(e,t){return r.a.createElement(Re,{key:t,practice:e,role:f})})):r.a.createElement("p",{className:"reservations__empty"},"No reservations yet"))),g&&r.a.createElement(h,g)))},Ke=(a(65),Se),Ze=_e,$e=Ce,Xe=Fe,Qe=function(e){var t=e.onBack,a=Object(n.useState)(),c=Object(u.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(),d=Object(u.a)(m,2),p=d[0],f=d[1],b=Object(n.useState)(),E=Object(u.a)(b,2),v=E[0],g=E[1],O=Object(n.useState)(null),w=Object(u.a)(O,2),k=w[0],y=w[1],j=sessionStorage.token;Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke(j);case 3:t=e.sent,a=t.users,o(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.message,y({error:!0,message:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[j]);var N=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f([]),g(void 0),a=t.target.value,e.next=5,x(a);case 5:return n=e.sent,r=_(n),e.next=9,C(a);case 9:c=e.sent,s=J(r,c),f(s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ze(j,t);case 3:return a=e.sent,n=a.user.profile.schedule.days,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),r=e.t0.message,y({error:!0,message:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_=function(e){var t=[];if(void 0===typeof e)return t;for(var a=0;a<30;a++){var n=Le()().add(a,"day").day(),r=Number(Le()().day());if(e&&e[n].hours.length>0){var c=Le()().day(a+r,"day").format("DD-MM-YYYY"),s=e[n].hours;t.push({day:c,hours:s})}}return t=S(t)},S=function(e){if(e.length&&e[0].day===Le()().format("DD-MM-YYYY")){var t=Le()().format("HH:mm");t=Le()(t,"HH:mm");var a=[];e[0].hours.forEach((function(e){var n=Le()(e,"HH:mm");t<n&&a.push(Le()(n).format("HH:mm"))})),e[0].hours=a}return e},C=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,$e(j,t);case 4:return n=e.sent,n.practices.forEach((function(e){var t=Le()(e.date).format("DD-MM-YYYY HH:mm").split(" "),n=Object(u.a)(t,2),r=n[0],c=n[1];a.push({day:r,hour:c})})),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(1),r=e.t0.message,y({error:!0,message:r});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e,t){return t&&t.forEach((function(t){return e.forEach((function(e){if(t.day===e.day){var a=e.hours.indexOf(t.hour);a>=0&&e.hours.splice(a,1)}}))})),e.filter((function(e){return e.hours.length>0}))},T=function(){var e=Object(i.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe(j,t,a);case 3:y({error:!1,message:"You have successfully booked!"}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),n=e.t0.message,y({error:!0,message:n});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:function(){return t()},className:"material-icons"},"undo"),r.a.createElement("h3",null,"Booking")),r.a.createElement("section",{className:"booking"},r.a.createElement("div",null,r.a.createElement("h3",null,"Do you want to book a practice?"),r.a.createElement("p",null,"You can select the instructor you prefer and the day and time that suits you best!"),r.a.createElement("p",null,"Every practice costs 1 credit.")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target,a=t.instructor.value,n=t.day.value,r=t.hour.value,c=p[n].day,s=Le()("".concat(c," ").concat(r),"DD-MM-YYYY HH:mm");T(a,s)}},r.a.createElement("select",{name:"instructor",onChange:N},r.a.createElement("option",{value:""},"-- instructor --"),s&&s.map((function(e,t){var a=e.name,n=e.surname,c=e._id;return r.a.createElement("option",{name:"instructor",key:t,value:c},a," ",n)}))),r.a.createElement("select",{name:"day",onChange:function(e){var t=e.target.value;g(t)}},r.a.createElement("option",{value:""},"-- date --"),p&&p.sort().map((function(e,t){var a=e.day;return r.a.createElement("option",{name:"day",key:t,value:t},a)}))),r.a.createElement("select",{name:"hour"},r.a.createElement("option",{value:""},"-- time --"),v&&p[v].hours.sort().map((function(e,t){return r.a.createElement("option",{name:"hour",key:t,value:e},e)}))),r.a.createElement("button",null,"Confirm")),k&&r.a.createElement(h,k)))},et=(a(66),function(e){var t=e.onBack,a=e.credits;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:t,className:"material-icons"},"undo"),r.a.createElement("h3",null,"Credits")),r.a.createElement("section",{className:"credits"},r.a.createElement("p",{className:"credits__available"},r.a.createElement("span",null,a)," credits"),r.a.createElement("p",null,"You can book as many practices as credits you have."),r.a.createElement("p",null,"To add more credits, please contact with your driving school.")))}),tt=(a(29),function(e){var t=e.practice,a=e.i,n=t.date,c=t.feedback,s=t.valoration;n=Le()(n).format("DD-MM-YYYY");var o={bad:"red",regular:"orange",good:"green"}[s];return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"timeline__item"},r.a.createElement("div",{className:"timeline__bullet timeline__bullet--".concat(o)},a),r.a.createElement("div",{className:"timeline__date"},n),r.a.createElement("div",{className:"timeline__feedback"},r.a.createElement("p",null,c))))}),at=Ce,nt=function(e){var t=e.id,a=e.onBack,c=Object(n.useState)(void 0),s=Object(u.a)(c,2),o=s[0],m=s[1],d=Object(n.useState)(null),p=Object(u.a)(d,2),f=p[0],b=p[1],E=sessionStorage.token;return Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!E){e.next=7;break}return e.next=4,at(E,t);case 4:a=e.sent,n=a.practices,m(n&&0===n.length?void 0:n);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r=e.t0.message,b({error:!0,message:r});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[E,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:a,className:"material-icons"},"undo"),r.a.createElement("h3",null,"Progression")),r.a.createElement("section",{className:"timeline"},r.a.createElement("ul",{className:"timeline__list"},o&&o.filter((function(e){return e.valoration})).sort((function(e,t){return Le()(e.date).diff(Le()(t.date))})).map((function(e,t){return r.a.createElement(tt,{practice:e,key:t,i:t+1})}))),f&&r.a.createElement(h,f)))},rt=(a(30),function(e){e.day,e.hour;var t=e.handleClick,a=e.isChecked;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:a?"schedule__item schedule__item--checked":"schedule__item",onClick:function(){return t()}}))}),ct=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"],st=[0,1,2,3,4,5,6],ot=["S","M","T","W","T","F","S"],lt=Je,it=_e,ut=function(e){var t=e.id,a=e.onBack,c=sessionStorage.token,s=Object(n.useContext)(d).roleOwner,o=Object(n.useState)(),m=Object(u.a)(o,2),p=m[0],f=m[1],b=Object(n.useState)(null),E=Object(u.a)(b,2),v=E[0],g=E[1],O=Object(n.useState)(null),w=Object(u.a)(O,2),k=w[0],y=w[1];Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var a,n,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,it(c,t);case 3:a=e.sent,n=a.user,r=n.name,s=n.profile.schedule.days,f(r),g(s),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),o=e.t0.message,y({error:!0,message:o});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[c,t]);var j=function(e,a){return Object(i.a)(l.a.mark((function n(){var r,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("admin"!==s){n.next=6;break}return n.next=3,lt(c,t,e,a);case 3:r=n.sent,o=r.instructor.profile.schedule.days,g(o);case 6:case"end":return n.stop()}}),n)})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:a,className:"material-icons"},"undo"),r.a.createElement("h3",null,p,"'s Schedule")),k&&r.a.createElement(h,k),r.a.createElement("section",{className:"schedule"},r.a.createElement("div",{className:"schedule__timetable"},r.a.createElement("div",{className:"schedule__week-names"},ot.map((function(e){return r.a.createElement("p",null,e)}))),r.a.createElement("div",{className:"schedule__time-interval"},ct.map((function(e){return r.a.createElement("p",null,e)}))),r.a.createElement("ul",{className:"schedule__board"},null===v?"Loading...":ct.map((function(e,t){return st.map((function(a,n){return r.a.createElement(rt,{key:"".concat(n,"-").concat(t),day:a,hour:e,handleClick:j(a,e),isChecked:v[a].hours.includes(e)})}))}))))))},mt=(a(22),a(5)),dt=function(e){var t=e.currentUser,a=Object(n.useContext)(d).roleOwner,c=t.name,s=t.surname,o=t.role,l=t._id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"users__user"},r.a.createElement(mt.b,{to:"admin"===a?"/account/".concat(l):"/progression/".concat(l)},r.a.createElement("i",{className:"material-icons users__user-icon"},"student"===o?"school":"directions_car"),r.a.createElement("p",null,c," ",s))))},pt=Se,ft=function(e){var t=e.onBack,a=e.id,c=Object(n.useContext)(d).roleOwner,s=Object(n.useState)(),o=Object(u.a)(s,2),m=o[0],p=o[1],f=sessionStorage.token,b=Object(n.useState)(null),E=Object(u.a)(b,2),v=E[0],g=E[1],O=Object(n.useState)(""),w=Object(u.a)(O,2),k=w[0],y=w[1];Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:t=e.sent,(a=t.users).studentId&&(a=a.studentId),p(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n=e.t0.message,g({error:!0,message:n});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);var j=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=7;break}return e.next=4,pt(f,a);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,pt(f);case 9:t=e.sent;case 10:return e.abrupt("return",t);case 13:e.prev=13,e.t0=e.catch(0),n=e.t0.message,g({error:!0,message:n});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:t,className:"material-icons"},"undo"),r.a.createElement("h3",{className:"title"},"admin"===c?"Users":"Your students")),r.a.createElement("section",{className:"users"},r.a.createElement("form",{className:"users__searcher",action:""},r.a.createElement("input",{className:"users__searcher-input",type:"text",placeholder:"search user",onChange:function(e){var t=e.target;y(t.value.toLowerCase())}})),r.a.createElement("ul",null,m&&m.filter((function(e){return e.name.toLowerCase().includes(k)||e.surname.toLowerCase().includes(k)})).sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){return r.a.createElement(dt,{key:t,currentUser:e})}))),v&&r.a.createElement(h,v)))},bt=(a(67),xe),Et=function(e){var t=e.onBack,a=sessionStorage.token,c=Object(n.useState)(null),s=Object(u.a)(c,2),o=s[0],m=s[1],d=function(){var e=Object(i.a)(l.a.mark((function e(t,n,r,c,s,o){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt(a,t,n,r,c,s,o);case 3:m({error:!1,message:"Registration succesfully!"}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),i=e.t0.message,m({error:!0,message:i});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:t,className:"material-icons"},"undo"),r.a.createElement("h3",null,"Register")),r.a.createElement("section",{className:"register"},r.a.createElement("h3",null,"Create a new user"),r.a.createElement("p",null,"All fields are required"),r.a.createElement("form",{className:"register__form",onSubmit:function(e){e.preventDefault();var t=e.target,a=t.name.value,n=t.surname.value,r=t.email.value,c=t.dni.value,s=t.password.value,o=t.role.value;d(a,n,r,c,s,o),e.target.reset()}},r.a.createElement("input",{type:"text",name:"name",placeholder:"name"}),r.a.createElement("input",{type:"text",name:"surname",placeholder:"surname"}),r.a.createElement("input",{type:"text",name:"email",placeholder:"email"}),r.a.createElement("input",{type:"text",name:"dni",placeholder:"DNI"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password"}),r.a.createElement("select",{name:"role"},r.a.createElement("option",{value:""},"-- role --"),r.a.createElement("option",{value:"student"},"student"),r.a.createElement("option",{value:"instructor"},"instructor"),r.a.createElement("option",{value:"admin"},"admin")),r.a.createElement("button",{className:"form__button form__button--register"},"Create account")),r.a.createElement(h,o)))},ht=(a(68),Ve),vt=Ye,gt=function(e){var t=e.id,a=e.onBack,c=sessionStorage.token,s=Object(n.useState)(),o=Object(u.a)(s,2),m=o[0],d=o[1],p=Object(n.useState)(),f=Object(u.a)(p,2),b=f[0],E=f[1],v=Object(n.useState)(),g=Object(u.a)(v,2),O=g[0],w=g[1],k=Object(n.useState)(),y=Object(u.a)(k,2),j=y[0],N=y[1],x=Object(n.useState)(),_=Object(u.a)(x,2),S=_[0],C=_[1],J=Object(n.useState)(),T=Object(u.a)(J,2),B=T[0],F=T[1],V=Object(n.useState)(),D=Object(u.a)(V,2),Y=D[0],M=D[1],I=Object(n.useState)(),H=Object(u.a)(I,2),A=H[0],P=H[1],L=Object(n.useState)(null),R=Object(u.a)(L,2),z=R[0],W=R[1],G=Object(n.useState)(!1),U=Object(u.a)(G,2),q=U[0],K=U[1];Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var a,n,r,s,o,i,m,p,f,b,h,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht(c,t);case 3:a=e.sent,n=a.practice,r=n.studentId,s=r.name,o=r.surname,i=r._id,m=n.date,p=Le()(m).format("DD-MM-YYYY HH:mm").split(" "),f=Object(u.a)(p,2),b=f[0],h=f[1],d(s),E(o),w(b),N(h),C(S),P(i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),v=e.t0.message,W({error:!0,message:v});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:a,className:"material-icons"},"undo"),r.a.createElement("h3",null,"Valoration")),r.a.createElement("section",{className:"valoration"},r.a.createElement("div",{className:"valoration__detail-container"},r.a.createElement("div",{className:"valoration__icon"},r.a.createElement("i",{className:"material-icons"},"create")),r.a.createElement("div",{className:"valoration__detail"},r.a.createElement("p",null,r.a.createElement("b",null,"Date: "),O),r.a.createElement("p",null,r.a.createElement("b",null,"Time: "),j),r.a.createElement("p",null,r.a.createElement("b",null,"Student: "),m," ",b))),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{vt(c,t,A,Y,B),K(!0),W({error:!1,message:"Thanks for your feedback!"})}catch(n){var a=n.message;W({error:!0,message:a})}},className:"valoration__form"},r.a.createElement("textarea",{className:"valoration__message",cols:"30",rows:"10",placeholder:"Please, write an accurate feedback to your student. Keep in mind that once sent, it won't be possible to edit.",onChange:function(e){M(e.target.value)}}),r.a.createElement("h4",null,"How was ",m,"'s performance?"),r.a.createElement("div",{className:"valoration__puntuation"},r.a.createElement("label",null,"Bad",r.a.createElement("input",{type:"radio",value:"bad",onChange:function(e){F(e.target.value)}})),r.a.createElement("label",null,"Regular",r.a.createElement("input",{type:"radio",value:"regular",onChange:function(e){F(e.target.value)}})),r.a.createElement("label",null,"Good",r.a.createElement("input",{type:"radio",value:"good",onChange:function(e){F(e.target.value)}}))),!q&&r.a.createElement("button",{className:"valoration__button"},"Send")),r.a.createElement("div",{className:"valoration__feedback"},z&&r.a.createElement(h,z))))},Ot=(a(69),function(){return r.a.createElement("i",{className:"material-icons detail-user__icon detail-user__icon--blue"},"search")}),wt=function(e){var t=e.id,a=Object(n.useContext)(d).roleOwner,c=r.a.createElement(mt.b,{to:"/account/".concat(t,"/users/")},r.a.createElement(Ot,null),r.a.createElement("p",null,"The instructor students")),s=r.a.createElement(mt.b,{to:"/users"},r.a.createElement(Ot,null),r.a.createElement("p",null,"Your students"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.b,{to:"/reservations/".concat(t)},r.a.createElement(Ot,null),r.a.createElement("p",null,"Reservations")),"admin"===a?c:s,r.a.createElement(mt.b,{to:"/schedule/".concat(t)},r.a.createElement(Ot,null),r.a.createElement("p",null,"Schedule")))},kt=function(e){var t=e.id,a=Object(n.useContext)(d).roleOwner;return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.b,{to:"/reservations/".concat(t)},r.a.createElement(Ot,null),r.a.createElement("p",null,"Reservations")),"student"===a&&r.a.createElement(mt.b,{to:"/credits/".concat(t)},r.a.createElement(Ot,null),r.a.createElement("p",null,"Credits")),r.a.createElement(mt.b,{to:"/progression/".concat(t)},r.a.createElement(Ot,null),r.a.createElement("p",null,"Progression")))},yt=_e,jt=function(e){var t=e.id,a=(e.history,e.onBack),c=Object(n.useState)(),s=Object(u.a)(c,2),o=s[0],m=s[1],d=Object(n.useState)(null),p=Object(u.a)(d,2),f=p[0],b=p[1],E=Object(n.useState)(null),v=Object(u.a)(E,2),g=v[0],O=v[1],w=sessionStorage.token;return Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var a,n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yt(w,t);case 3:a=e.sent,n=a.user,r=n.role,c=n.name,m(r),O(c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),s=e.t0.message,b({error:!0,message:s});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[w,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:function(){return a()},className:"material-icons"},"undo"),r.a.createElement("h3",{className:"title"},g,"'s account")),r.a.createElement("section",{className:"account"},r.a.createElement(mt.b,{to:"/profile/".concat(t)},r.a.createElement("i",{className:"material-icons detail-user__icon"},"create"),r.a.createElement("p",null,"Profile")),"student"===o&&r.a.createElement(kt,{id:t}),"instructor"===o&&r.a.createElement(wt,{id:t})),f&&r.a.createElement(h,f))},Nt=(a(31),function(e){var t=e.elem,a=e.permission,c=e.onEditMode,s=Object(n.useContext)(d).roleOwner;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:s!==a?"detail-user__input--separation-no-icon":""},s===a&&r.a.createElement("button",{type:"button",className:"detail-user__button--hidden",onClick:function(){return c(t)}},r.a.createElement("i",{className:"material-icons detail-user__icon"},"create"))))}),xt=function(e){var t=e.isEditting,a=e.label,n=e.children,c=e.content;return r.a.createElement("p",{className:t?"detail-user__input--separation":""},r.a.createElement("b",null,a),t?n:r.a.createElement("span",null,c))},_t=_e,St=Te,Ct=Be,Jt=function(e){var t=e.id,a=e.onBack,c=Object(n.useState)(!1),s=Object(u.a)(c,2),o=s[0],m=s[1],p=Object(n.useState)(!1),f=Object(u.a)(p,2),b=f[0],E=f[1],v=Object(n.useState)(!1),g=Object(u.a)(v,2),O=g[0],w=g[1],k=Object(n.useState)(!1),y=Object(u.a)(k,2),j=y[0],N=y[1],x=Object(n.useState)(!1),_=Object(u.a)(x,2),S=_[0],C=_[1],J=Object(n.useState)(!1),T=Object(u.a)(J,2),B=T[0],F=T[1],V=Object(n.useState)(),D=Object(u.a)(V,2),Y=D[0],M=D[1],I=Object(n.useState)(),H=Object(u.a)(I,2),A=H[0],P=H[1],L=Object(n.useState)(),R=Object(u.a)(L,2),z=R[0],W=R[1],G=Object(n.useState)(),U=Object(u.a)(G,2),q=U[0],K=U[1],Z=Object(n.useState)(),$=Object(u.a)(Z,2),X=$[0],Q=$[1],ee=Object(n.useState)(),te=Object(u.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(),ce=Object(u.a)(re,2),se=ce[0],oe=ce[1],le=Object(n.useState)(null),ie=Object(u.a)(le,2),ue=ie[0],me=ie[1],de=Object(n.useContext)(d).roleOwner,pe=sessionStorage.token;Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var a,n,r,c,s,o,i,u,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_t(pe,t);case 3:a=e.sent,n=a.user,r=n.name,c=n.surname,s=n.email,o=n.dni,i=n.role,u=n.profile.credits,oe(o),M(r),P(c),W(s),Q(i),ne(u),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),m=e.t0.message,me({error:!0,message:m});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[pe,t]);var fe=function(e){"firstName"===e?E(!b):"lastName"===e?w(!O):"email"===e?N(!j):"credits"===e?C(!S):"dni"===e&&F(!B),m(!0)},be=function(){m(!1),E(!1),w(!1),N(!1),C(!1),F(!1),me(null)},Ee=function(){var e=Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,St(pe,t);case 3:a(),a(),me({error:!1,message:"User deleted successfully!"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.message,me({error:!0,message:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(l.a.mark((function e(a,n,r,c,s,o){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct(pe,t,a,n,r,c,s,o);case 3:be(),me({error:!1,message:"Your changes have been saved successfully!"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i=e.t0.message,me({error:!0,message:i});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:a,className:"material-icons"},"undo"),r.a.createElement("h3",null,"Profile")),r.a.createElement("section",{className:"detail-user"},r.a.createElement("div",{className:"detail-user__container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),he(Y,A,z,se,ae,q)}},r.a.createElement("div",null,r.a.createElement(Nt,{elem:"firstName",permission:"admin",onEditMode:fe}),r.a.createElement(xt,{isEditting:b,label:"First name: ",content:Y},r.a.createElement("input",{className:"detail-user__input",type:"text",placeholder:Y,name:"name",value:Y,onChange:function(e){return M(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement(Nt,{elem:"lastName",permission:"admin",onEditMode:fe}),r.a.createElement(xt,{isEditting:O,label:"Last name: ",content:A},r.a.createElement("input",{className:"detail-user__input",type:"text",placeholder:A,name:"surname",value:A,onChange:function(e){return P(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement(Nt,{elem:"email",permission:de,onEditMode:fe}),r.a.createElement(xt,{isEditting:j,label:"e-mail: ",content:z},r.a.createElement("input",{className:"detail-user__input",type:"text",placeholder:z,name:"email",value:z,onChange:function(e){return W(e.target.value)}}))),"admin"===de&&"student"===X&&r.a.createElement("div",null,r.a.createElement(Nt,{elem:"credits",permission:de,onEditMode:fe}),r.a.createElement(xt,{isEditting:S,label:"Credits : ",content:ae},r.a.createElement("input",{className:"detail-user__input",type:"number",pattern:"[0-9]*",placeholder:ae,name:"credits",min:"0",value:ae,onChange:function(e){return ne(Number(e.target.value))}}))),r.a.createElement("div",null,r.a.createElement(Nt,{elem:"dni",permission:"admin",onEditMode:fe}),r.a.createElement(xt,{isEditting:B,label:"DNI : ",content:se},r.a.createElement("input",{className:"detail-user__input",type:"text",placeholder:se,name:"dni",value:se,onChange:function(e){return oe(e.target.value)}}))),!o&&r.a.createElement("div",{className:"detail-user__input--separation-no-icon"},r.a.createElement("p",null,r.a.createElement("b",null,"Account: "),X)),o&&"admin"!==de&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Introduce your password to confirm changes"),r.a.createElement("input",{className:"detail-user__input--password",type:"password",placeholder:"password",name:"password",value:q,onChange:function(e){return K(e.target.value)}})),o&&r.a.createElement("div",{className:"detail-user__buttons"},r.a.createElement("button",{type:"button",className:"detail-user__button detail-user__button--cancel",onClick:be},"Cancel"),r.a.createElement("button",{type:"submit",className:"detail-user__button detail-user__button--submit"},"Submit"))),ue&&r.a.createElement(h,ue),"admin"===de&&!o&&!ue&&r.a.createElement("button",{type:"button",onClick:Ee,className:"detail-user__button detail-user__button--delete"},"Delete user"))))},Tt=(a(70),function(e){var t=e.onToggleMenu,a=e.onLogout,c=Object(n.useContext)(d).myId,s=[{url:"/home",text:"Home",fn:t},{url:"/booking",text:"Booking",fn:t},{url:"/account/".concat(c),text:"Account",fn:t},{url:"/",text:"Logout",fn:a}];return r.a.createElement(r.a.Fragment,null,s.map((function(e){var t=e.url,a=e.text,n=e.fn;return r.a.createElement("li",{className:"navbar__menu-item"},r.a.createElement(mt.b,{onClick:n,to:t},a))})))}),Bt=function(e){var t=e.onToggleMenu,a=e.onLogout,c=Object(n.useContext)(d).myId,s=[{url:"/home",text:"Home",fn:t},{url:"/account/".concat(c),text:"Account",fn:t},{url:"/",text:"Logout",fn:a}];return r.a.createElement(r.a.Fragment,null,s.map((function(e){var t=e.url,a=e.text,n=e.fn;return r.a.createElement("li",{className:"navbar__menu-item"},r.a.createElement(mt.b,{onClick:n,to:t},a))})))},Ft=function(e){var t=e.onToggleMenu,a=[{url:"/home",text:"Home",fn:t},{url:"/register",text:"Register",fn:t},{url:"/users",text:"Users",fn:t},{url:"/",text:"Logout",fn:e.onLogout}];return r.a.createElement(r.a.Fragment,null,a.map((function(e){var t=e.url,a=e.text,n=e.fn;return r.a.createElement("li",{className:"navbar__menu-item"},r.a.createElement(mt.b,{onClick:n,to:t},a))})))},Vt=function(){var e=Object(n.useContext)(d),t=e.roleOwner,a=e.nameSurname,c=Object(n.useState)(!1),s=Object(u.a)(c,2),o=s[0],l=s[1],i=function(){l(!o)},m=function(){sessionStorage.clear()};return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar__menu-toggle"},r.a.createElement("div",{onClick:i,className:"navbar__lines-container"},r.a.createElement("span",{className:"navbar__line"}),r.a.createElement("span",{className:"navbar__line"}),r.a.createElement("span",{className:"navbar__line"})),r.a.createElement("h1",{className:"navbar__title"},"Wheely"),r.a.createElement("ul",{className:o?"navbar__menu navbar__menu--show":"navbar__menu"},"student"===t&&r.a.createElement(Tt,{onToggleMenu:i,onLogout:m}),"instructor"===t&&r.a.createElement(Bt,{onToggleMenu:i,onLogout:m}),"admin"===t&&r.a.createElement(Ft,{onToggleMenu:i,onLogout:m})))),r.a.createElement("div",{className:"greeting"},r.a.createElement("i",{className:"material-icons greeting__rol-icon"},"supervisor_account"),r.a.createElement("h3",{className:"greeting__name"},a)))},Dt=(a(71),Ve),Yt=De,Mt=function(e){var t=e.id,a=e.onBack,c=sessionStorage.token,s=Object(n.useState)(),o=Object(u.a)(s,2),m=o[0],d=o[1],p=Object(n.useState)(),f=Object(u.a)(p,2),b=f[0],E=f[1],v=Object(n.useState)(),g=Object(u.a)(v,2),O=g[0],w=g[1],k=Object(n.useState)(),y=Object(u.a)(k,2),j=y[0],N=y[1],x=Object(n.useState)(),_=Object(u.a)(x,2),S=_[0],C=_[1],J=Object(n.useState)(),T=Object(u.a)(J,2),B=T[0],F=T[1],V=Object(n.useState)(null),D=Object(u.a)(V,2),Y=D[0],M=D[1],I=Object(n.useState)(!1),H=Object(u.a)(I,2),A=H[0],P=H[1];Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var a,n,r,s,o,i,m,p,f,b,h,v,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt(c,t);case 3:a=e.sent,n=a.practice,r=n.instructorId,s=r.name,o=r.surname,i=r._id,m=n.date,p=n._id,f=Le()(m).format("DD-MM-YYYY HH:mm").split(" "),b=Object(u.a)(f,2),h=b[0],v=b[1],d(s),E(o),w(h),N(v),F(p),C(i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),g=e.t0.message,M({error:!0,message:g});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))()}),[c,t]);var L=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt(c,S,B);case 3:M({error:!1,message:"Reservation canceled successfully!"}),P(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.message,M({error:!0,message:"We are sorry! It is not possible to cancel with less than 24h of advance"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},r.a.createElement("i",{onClick:a,className:"material-icons"},"undo"),r.a.createElement("h3",null,"Reservation detail")),r.a.createElement("section",{className:"reservation-detail"},r.a.createElement("div",null,r.a.createElement("p",null,"Those are your reservation details: "),r.a.createElement("p",null,r.a.createElement("b",null,"Date: "),O),r.a.createElement("p",null,r.a.createElement("b",null,"Time: "),j),r.a.createElement("p",null,r.a.createElement("b",null,"Place: "),"In your driving school"),r.a.createElement("p",null,r.a.createElement("b",null,"Instructor: "),m," ",b),r.a.createElement("p",null,"Do you want to cancel the practice?"),r.a.createElement("p",null,"Keep in mind that you can cancel it notifying with 24h of advance. In this case, your credit will be returned.")),r.a.createElement(h,Y),!A&&r.a.createElement("button",{className:"reservation-detail__button",onClick:L},"Cancel")))},It=_e,Ht=Object(m.e)((function(e){var t=e.history,a=Object(n.useState)(),c=Object(u.a)(a,2),s=c[0],o=c[1],p=Object(n.useState)(),f=Object(u.a)(p,2),b=f[0],h=f[1],v=Object(n.useState)(void 0),g=Object(u.a)(v,2),O=g[0],w=g[1],k=Object(n.useState)(),y=Object(u.a)(k,2),j=y[0],N=y[1],x=Object(n.useState)(),_=Object(u.a)(x,2),S=_[0],C=_[1],J=sessionStorage.token;Object(n.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var t,a,n,r,c,s,i,m,d,p,f,b,E,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!J){e.next=16;break}return t=J.split("."),a=Object(u.a)(t,2),n=a[1],r=atob(n),c=JSON.parse(r),s=c.sub,i=s,e.next=8,It(J,i);case 8:m=e.sent,d=m.user,p=d.name,f=d.surname,b=d.role,E=p.concat(" ").concat(f),h(i),C(p),w(b),o(E),"student"===O&&(v=m.user.profile.credits,N(v));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()}));var T=function(e){t.goBack()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.Provider,{value:{roleOwner:O,setRoleOwner:w,nameSurname:s,setNameSurname:o,setMyId:h,myId:b}},!J&&r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(He,null)}}),J&&O&&r.a.createElement(Vt,null),J&&r.a.createElement(m.a,{path:"/home",render:function(){return r.a.createElement(E,{name:S})}}),J&&"admin"===O&&r.a.createElement(m.a,{path:"/register",render:function(){return r.a.createElement(Et,{onBack:T})}}),J&&O&&r.a.createElement(m.a,{exact:!0,path:"/account/:id",render:function(e){var t=e.match.params.id;return r.a.createElement(jt,{id:t,onBack:T})}}),J&&"admin"===O&&r.a.createElement(m.a,{exact:!0,path:"/account/:id/users/",render:function(e){var t=e.match.params.id;return t&&r.a.createElement(ft,{id:t,onBack:T})}}),J&&O&&r.a.createElement(m.a,{path:"/profile/:id",render:function(e){var t=e.match.params.id;return J&&t?r.a.createElement(Jt,{id:t,onBack:T}):r.a.createElement(E,null)}}),("admin"===O||"instructor"===O)&&r.a.createElement(m.a,{path:"/users",render:function(){return r.a.createElement(ft,{onBack:T})}}),J&&"student"===O&&r.a.createElement(m.a,{path:"/booking",render:function(){return J?r.a.createElement(Qe,{onBack:T}):""}}),J&&"student"===O&&r.a.createElement(m.a,{path:"/credits",render:function(){return J?r.a.createElement(et,{onBack:T,credits:j}):""}}),O&&r.a.createElement(m.a,{path:"/progression/:id",render:function(e){var t=e.match.params.id;return J&&t?r.a.createElement(nt,{id:t,onBack:T}):r.a.createElement(Vt,null)}}),J&&("admin"===O||"instructor"===O)&&r.a.createElement(m.a,{path:"/schedule/:id",render:function(e){var t=e.match.params.id;return J&&t?r.a.createElement(ut,{id:t,onBack:T}):r.a.createElement(E,null)}}),J&&"instructor"===O&&r.a.createElement(m.a,{path:"/valoration/:id",render:function(e){var t=e.match.params.id;return J?r.a.createElement(gt,{id:t,onBack:T}):r.a.createElement(E,null)}}),O&&r.a.createElement(m.a,{path:"/reservations/:id",render:function(e){var t=e.match.params.id;return J&&t?r.a.createElement(qe,{id:t,onBack:T}):""}}),("instructor"===O||"student"===O)&&r.a.createElement(m.a,{path:"/reservation-detail/:id",render:function(e){var t=e.match.params.id;return J&&t?r.a.createElement(Mt,{id:t,onBack:T}):""}})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(mt.a,null,r.a.createElement(Ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[36,1,2]]]);
//# sourceMappingURL=main.4423ea2a.chunk.js.map